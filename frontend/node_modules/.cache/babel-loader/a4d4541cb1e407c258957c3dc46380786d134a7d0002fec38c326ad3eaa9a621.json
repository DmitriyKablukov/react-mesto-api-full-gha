{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers,\n      credentials\n    } = _ref;\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n    this._credentials = 'include';\n  }\n  //Проверка ответа\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n  //Обработка данных ответа\n  _handleData(url, _ref2) {\n    let {\n      method,\n      credentials,\n      headers,\n      body\n    } = _ref2;\n    return fetch(`${this._baseUrl}${url}`, {\n      method,\n      headers,\n      credentials,\n      body\n    }).then(this._checkResponse);\n  }\n  getUserInfo() {\n    return this._handleData('/users/me', {\n      method: 'GET',\n      credentials: 'include',\n      headers: this._headers\n    });\n  }\n  sendUserInfo(_ref3) {\n    let {\n      name,\n      about\n    } = _ref3;\n    return this._handleData('/users/me', {\n      method: 'PATCH',\n      credentials: this._credentials,\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        about\n      })\n    });\n  }\n  getInitialCards() {\n    return this._handleData('/cards', {\n      method: 'GET',\n      credentials: 'include',\n      headers: this._headers\n    });\n  }\n  sendCardInfo(_ref4) {\n    let {\n      name,\n      link\n    } = _ref4;\n    return this._handleData('/cards', {\n      method: 'POST',\n      credentials: this._credentials,\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        link\n      })\n    });\n  }\n  removeCard(cardId) {\n    return this._handleData(`/cards/${cardId}`, {\n      method: 'DELETE',\n      credentials: this._credentials,\n      headers: this._headers\n    });\n  }\n  putLike(cardId) {\n    return this._handleData(`/cards/${cardId}/likes`, {\n      method: 'PUT',\n      credentials: this._credentials,\n      headers: this._headers\n    });\n  }\n  removeLike(cardId) {\n    return this._handleData(`/cards/${cardId}/likes`, {\n      method: 'DELETE',\n      credentials: this._credentials,\n      headers: this._headers\n    });\n  }\n  changeLikeCardStatus(cardId, isLiked) {\n    return isLiked ? this.removeLike(cardId) : this.putLike(cardId);\n  }\n  sendAvatarInfo(avatar) {\n    return this._handleData('/users/me/avatar', {\n      method: 'PATCH',\n      credentials: 'include',\n      headers: this._headers,\n      body: JSON.stringify(avatar)\n    });\n  }\n}\nconst api = new Api({\n  baseUrl: 'http://localhost:3000',\n  credentials: 'include',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nexport { api, Api };","map":{"version":3,"names":["Api","constructor","_ref","baseUrl","headers","credentials","_baseUrl","_headers","_credentials","_checkResponse","res","ok","json","Promise","reject","status","_handleData","url","_ref2","method","body","fetch","then","getUserInfo","sendUserInfo","_ref3","name","about","JSON","stringify","getInitialCards","sendCardInfo","_ref4","link","removeCard","cardId","putLike","removeLike","changeLikeCardStatus","isLiked","sendAvatarInfo","avatar","api"],"sources":["/Users/dimakablukov/Downloads/react-mesto-api-full-gha-main/frontend/src/utils/Api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl, headers, credentials }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n    this._credentials = 'include';\n  }\n  //Проверка ответа\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n      \n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n  //Обработка данных ответа\n  _handleData(url, { method, credentials, headers, body }) {\n    return fetch(`${this._baseUrl}${url}`, {\n      method,\n      headers,\n      credentials,\n      body\n    })\n    .then(this._checkResponse)\n  }\n\n  getUserInfo() {\n    return this._handleData('/users/me', { method: 'GET', credentials: 'include', headers: this._headers });\n  }\n\n  sendUserInfo({ name, about }) {\n    return this._handleData('/users/me', { method: 'PATCH', credentials: this._credentials, headers: this._headers, body: JSON.stringify({ name, about })});\n  }\n\n  getInitialCards() {\n    return this._handleData('/cards', {method: 'GET', credentials: 'include', headers: this._headers});\n  }\n\n  sendCardInfo({ name, link }) {\n    return this._handleData('/cards', { method: 'POST', credentials: this._credentials, headers: this._headers, body: JSON.stringify({ name, link })});\n  }\n\n  removeCard(cardId) {\n    return this._handleData(`/cards/${cardId}`, {method: 'DELETE', credentials: this._credentials, headers: this._headers});\n  }\n\n  putLike(cardId) {\n    return this._handleData(`/cards/${cardId}/likes`, {method: 'PUT', credentials: this._credentials, headers: this._headers});\n  }\n\n  removeLike(cardId) {\n    return this._handleData(`/cards/${cardId}/likes`, {method: 'DELETE', credentials: this._credentials, headers: this._headers});\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return isLiked ? this.removeLike(cardId) : this.putLike(cardId)\n  }\n\n  sendAvatarInfo(avatar) {\n    return this._handleData('/users/me/avatar', { method: 'PATCH', credentials: 'include', headers: this._headers, body: JSON.stringify(avatar)});\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'http://localhost:3000',\n  credentials: 'include',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n})\n\nexport {api, Api}"],"mappings":"AAAA,MAAMA,GAAG,CAAC;EACRC,WAAWA,CAAAC,IAAA,EAAoC;IAAA,IAAnC;MAAEC,OAAO;MAAEC,OAAO;MAAEC;IAAY,CAAC,GAAAH,IAAA;IAC3C,IAAI,CAACI,QAAQ,GAAGH,OAAO;IACvB,IAAI,CAACI,QAAQ,GAAGH,OAAO;IACvB,IAAI,CAACI,YAAY,GAAG,SAAS;EAC/B;EACA;EACAC,cAAcA,CAACC,GAAG,EAAE;IAClB,IAAIA,GAAG,CAACC,EAAE,EAAE;MACV,OAAOD,GAAG,CAACE,IAAI,CAAC,CAAC;IAEnB,CAAC,MAAM;MACL,OAAOC,OAAO,CAACC,MAAM,CAAE,WAAUJ,GAAG,CAACK,MAAO,EAAC,CAAC;IAChD;EACF;EACA;EACAC,WAAWA,CAACC,GAAG,EAAAC,KAAA,EAA0C;IAAA,IAAxC;MAAEC,MAAM;MAAEd,WAAW;MAAED,OAAO;MAAEgB;IAAK,CAAC,GAAAF,KAAA;IACrD,OAAOG,KAAK,CAAE,GAAE,IAAI,CAACf,QAAS,GAAEW,GAAI,EAAC,EAAE;MACrCE,MAAM;MACNf,OAAO;MACPC,WAAW;MACXe;IACF,CAAC,CAAC,CACDE,IAAI,CAAC,IAAI,CAACb,cAAc,CAAC;EAC5B;EAEAc,WAAWA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACP,WAAW,CAAC,WAAW,EAAE;MAAEG,MAAM,EAAE,KAAK;MAAEd,WAAW,EAAE,SAAS;MAAED,OAAO,EAAE,IAAI,CAACG;IAAS,CAAC,CAAC;EACzG;EAEAiB,YAAYA,CAAAC,KAAA,EAAkB;IAAA,IAAjB;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAAF,KAAA;IAC1B,OAAO,IAAI,CAACT,WAAW,CAAC,WAAW,EAAE;MAAEG,MAAM,EAAE,OAAO;MAAEd,WAAW,EAAE,IAAI,CAACG,YAAY;MAAEJ,OAAO,EAAE,IAAI,CAACG,QAAQ;MAAEa,IAAI,EAAEQ,IAAI,CAACC,SAAS,CAAC;QAAEH,IAAI;QAAEC;MAAM,CAAC;IAAC,CAAC,CAAC;EACzJ;EAEAG,eAAeA,CAAA,EAAG;IAChB,OAAO,IAAI,CAACd,WAAW,CAAC,QAAQ,EAAE;MAACG,MAAM,EAAE,KAAK;MAAEd,WAAW,EAAE,SAAS;MAAED,OAAO,EAAE,IAAI,CAACG;IAAQ,CAAC,CAAC;EACpG;EAEAwB,YAAYA,CAAAC,KAAA,EAAiB;IAAA,IAAhB;MAAEN,IAAI;MAAEO;IAAK,CAAC,GAAAD,KAAA;IACzB,OAAO,IAAI,CAAChB,WAAW,CAAC,QAAQ,EAAE;MAAEG,MAAM,EAAE,MAAM;MAAEd,WAAW,EAAE,IAAI,CAACG,YAAY;MAAEJ,OAAO,EAAE,IAAI,CAACG,QAAQ;MAAEa,IAAI,EAAEQ,IAAI,CAACC,SAAS,CAAC;QAAEH,IAAI;QAAEO;MAAK,CAAC;IAAC,CAAC,CAAC;EACpJ;EAEAC,UAAUA,CAACC,MAAM,EAAE;IACjB,OAAO,IAAI,CAACnB,WAAW,CAAE,UAASmB,MAAO,EAAC,EAAE;MAAChB,MAAM,EAAE,QAAQ;MAAEd,WAAW,EAAE,IAAI,CAACG,YAAY;MAAEJ,OAAO,EAAE,IAAI,CAACG;IAAQ,CAAC,CAAC;EACzH;EAEA6B,OAAOA,CAACD,MAAM,EAAE;IACd,OAAO,IAAI,CAACnB,WAAW,CAAE,UAASmB,MAAO,QAAO,EAAE;MAAChB,MAAM,EAAE,KAAK;MAAEd,WAAW,EAAE,IAAI,CAACG,YAAY;MAAEJ,OAAO,EAAE,IAAI,CAACG;IAAQ,CAAC,CAAC;EAC5H;EAEA8B,UAAUA,CAACF,MAAM,EAAE;IACjB,OAAO,IAAI,CAACnB,WAAW,CAAE,UAASmB,MAAO,QAAO,EAAE;MAAChB,MAAM,EAAE,QAAQ;MAAEd,WAAW,EAAE,IAAI,CAACG,YAAY;MAAEJ,OAAO,EAAE,IAAI,CAACG;IAAQ,CAAC,CAAC;EAC/H;EAEA+B,oBAAoBA,CAACH,MAAM,EAAEI,OAAO,EAAE;IACpC,OAAOA,OAAO,GAAG,IAAI,CAACF,UAAU,CAACF,MAAM,CAAC,GAAG,IAAI,CAACC,OAAO,CAACD,MAAM,CAAC;EACjE;EAEAK,cAAcA,CAACC,MAAM,EAAE;IACrB,OAAO,IAAI,CAACzB,WAAW,CAAC,kBAAkB,EAAE;MAAEG,MAAM,EAAE,OAAO;MAAEd,WAAW,EAAE,SAAS;MAAED,OAAO,EAAE,IAAI,CAACG,QAAQ;MAAEa,IAAI,EAAEQ,IAAI,CAACC,SAAS,CAACY,MAAM;IAAC,CAAC,CAAC;EAC/I;AACF;AAEA,MAAMC,GAAG,GAAG,IAAI1C,GAAG,CAAC;EAClBG,OAAO,EAAE,uBAAuB;EAChCE,WAAW,EAAE,SAAS;EACtBD,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAEF,SAAQsC,GAAG,EAAE1C,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}